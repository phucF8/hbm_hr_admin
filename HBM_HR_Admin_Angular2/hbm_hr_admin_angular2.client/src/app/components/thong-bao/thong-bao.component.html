<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div class="flex-grow-1 me-3">
      <input type="text" class="form-control" placeholder="ğŸ” TÃ¬m kiáº¿m theo tiÃªu Ä‘á»" [(ngModel)]="searchText">
    </div>
    <div class="text-end">
      <div class="dropdown">
        <span class="fw-bold dropdown-toggle" style="cursor: pointer;" data-bs-toggle="dropdown" aria-expanded="false">
          ğŸ‘¤ {{tenNhanVien}}
        </span>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><button class="dropdown-item" (click)="logout()">ÄÄƒng xuáº¥t</button></li>
        </ul>
      </div>
    </div>
  </div>
  
  <div class="mb-3 d-flex align-items-center gap-3">
    <div>
      <span class="fw-bold">ğŸ“‚ Lá»c theo tráº¡ng thÃ¡i: </span>
      <span class="badge bg-danger">âŒ Send fail</span>
      <span class="badge bg-success">âœ… Send succ</span>
      <span class="badge bg-secondary">ÄÃ£ Ä‘á»c</span>
    </div>
    
    <div>
      <span class="fw-bold">ğŸ“‹ Loáº¡i thÃ´ng bÃ¡o: </span>
      <select class="form-select d-inline-block w-auto" [(ngModel)]="selectedType" (change)="onTypeChange()">
        <option [value]="0">Táº¥t cáº£ (0)</option>
        <option *ngFor="let type of notificationTypes" [value]="type.id">{{type.name}}{{isDebug ? ' (' + type.id + ')' : ''}}</option>
      </select>
    </div>
  </div>
  
  <div class="table-responsive">
    <table class="table table-bordered table-hover">
      <thead class="table-dark">
        <tr>
          <th>
            <input type="checkbox" [(ngModel)]="selectAll" (change)="toggleSelectAll()">
          </th>
          <th>TiÃªu Ä‘á»</th>
          <th>Ná»™i dung</th>
          <th>NgÆ°á»i gá»­i</th>
          <th>NgÃ y giá» gá»­i</th>
          <th>Send succ / sum</th>
          <th>Loáº¡i thÃ´ng bÃ¡o</th>
          <th>HÃ nh Ä‘á»™ng</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tb of thongBaoList">
          <td>
            <input type="checkbox" [(ngModel)]="tb.selected">
          </td>
          <td>
            {{ tb.title }}
            <div *ngIf="isDebug" class="text-muted small">{{ tb.id }}</div>
          </td>
          <td>{{ tb.content }}</td>
          <td>{{ tb.tenNhanVien }}</td>
          <td>{{ tb.sentAt | date:'dd/MM/yyyy HH:mm' }}</td>
          <td>{{ tb.receivedCount }}/{{ tb.totalRecipients }}</td>
          <td>{{ getNotificationTypeName(tb.notificationType) }}</td>
          <td>
            <button class="btn btn-warning btn-sm" (click)="editThongBao(tb.id)">ğŸ“ Sá»­a</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div class="d-flex justify-content-between mt-3">
    <div>
      <button class="btn btn-danger me-2" (click)="deleteMultiSelected()">
        <i class="bi bi-trash"></i> <!-- Thay báº±ng biá»ƒu tÆ°á»£ng thÃ¹ng rÃ¡c -->
      </button>
      <button class="btn btn-primary me-2" (click)="sendAgain()">Gá»­i láº¡i</button>
      <button class="btn btn-success" (click)="taoThongBao()">
        <i class="bi bi-plus-circle"></i> Táº¡o thÃ´ng bÃ¡o má»›i
      </button>
    </div>

    <app-pagination [totalPages]="totalPages" [currentPage]="currentPage" (pageChange)="onPageChange($event)">
    </app-pagination>
  </div>
</div>
