<div class="container">


  <button type="button" class="add-question-btn" (click)="addQuestion()">
    <span>+</span>
    Th√™m c√¢u h·ªèi
  </button>

  <div class="questions-container" cdkDropList (cdkDropListDropped)="drop($event)">
    <!-- Empty State -->
    <div class="empty-state" *ngIf="questions.length === 0">
      <h3>Ch∆∞a c√≥ c√¢u h·ªèi n√†o</h3>
      <p>Nh·∫•n "Th√™m c√¢u h·ªèi m·ªõi" ƒë·ªÉ b·∫Øt ƒë·∫ßu t·∫°o c√¢u h·ªèi ƒë·∫ßu ti√™n</p>
    </div>

    <!-- Questions List -->
    <div class="question-card" [ngClass]="{ 'collapsed': question.collapsed }" cdkDrag
      *ngFor="let question of questions; trackBy: trackByQuestionId">
      <!-- Question Header -->
      <div class="question-header">
        <button type="button" class="action-btn drag-handle" title="K√©o th·∫£ ƒë·ªÉ s·∫Øp x·∫øp" cdkDragHandle>
          ‚ãÆ‚ãÆ
        </button>

        <div class="question-type" [ngClass]="'type-' + question.type">
          {{ getTypeLabel(question.type) }}
        </div>

        <div class="question-content">
          <input type="text" class="question-title" [value]="question.title"
            (change)="updateQuestionTitle($event, question.id)" placeholder="Nh·∫≠p ti√™u ƒë·ªÅ c√¢u h·ªèi...">
        </div>

        <select class="question-type-select" [value]="question.type"
          (change)="updateQuestionTitle($event, question.id)">
          <option value="single">Ch·ªçn m·ªôt</option>
          <option value="multiple">Ch·ªçn nhi·ªÅu</option>
          <option value="text">T·ª± lu·∫≠n</option>
        </select>

        <div class="question-actions">
          <button type="button" class="action-btn collapse-btn" (click)="toggleCollapse(question.id)"
            title="Thu g·ªçn/M·ªü r·ªông" *ngIf="question.type !== 'text'">
            {{ question.collapsed ? '‚ñº' : '‚ñ≤' }}
          </button>
          <button type="button" class="action-btn delete-btn" (click)="deleteQuestion(question.id)" title="X√≥a c√¢u h·ªèi">
            üóëÔ∏è
          </button>
        </div>
      </div>

      <!-- Options Container -->
      <div class="options-container" *ngIf="question.type !== 'text'">
        <div class="options-header">
          <div class="options-title">C√°c l·ª±a ch·ªçn</div>
          <button type="button" class="add-option-btn" (click)="addOption(question.id)">
            <span>+</span>
            Th√™m l·ª±a ch·ªçn
          </button>
        </div>

        <!-- Options List -->
        <div class="option-item" *ngFor="let option of question.options; trackBy: trackByOptionId">
          <input type="text" class="option-input" [value]="option.text"
            (change)="updateOption($event, question.id, option.id)" placeholder="Nh·∫≠p n·ªôi dung l·ª±a ch·ªçn...">
          <div class="option-actions">
            <button type="button" class="option-delete" (click)="deleteOption(question.id, option.id)"
              title="X√≥a l·ª±a ch·ªçn">
              ‚úï
            </button>
          </div>
        </div>

        <!-- Empty Options State -->
        <div style="text-align: center; color: #64748b; padding: 20px;" *ngIf="question.options.length === 0">
          Ch∆∞a c√≥ l·ª±a ch·ªçn n√†o. Nh·∫•n "Th√™m l·ª±a ch·ªçn" ƒë·ªÉ b·∫Øt ƒë·∫ßu.
        </div>
      </div>
    </div>
  </div>
</div>